import InfoForm from "@/components/InfoForm";
import { getClient, getChoices } from "@/lib/api";
export const dynamic = "force-dynamic";

type Params = Promise<{ id: string }>;

export default async function Page({ params }: { params: Params }) {
  const { id } = await params;
  const [client, choices] = await Promise.all([getClient(id), getChoices()]);

  if (!client) {
    return (
      <section className="space-y-4">
        <h1 className="text-2xl font-semibold">CLIENTS &gt; Introuvable</h1>
        <div className="rounded-lg border p-4 text-sm">
          Le client #{id} est introuvable. 
          <a href="/exploitation/structure/clients" className="ml-2 underline">Retour Ã  la liste des clients</a>.
        </div>
      </section>
    );
  }

  return <InfoForm id={id} initial={client} choices={choices} />;
}
