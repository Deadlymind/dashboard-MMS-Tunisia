import NewClientForm from "@/components/NewClientForm";
export const dynamic = "force-dynamic";
const EMPTY = { person_types:[], formes_juridiques:[], statuts:[], countries:[] } as const;

async function getChoices(){
  try{
    const r = await fetch("http://127.0.0.1:8000/api/v1/exploitation/clients/choices/", { cache:"no-store" });
    if(!r.ok) return EMPTY;
    return r.json();
  }catch{ return EMPTY; }
}

export default async function Page(){
  const choices = await getChoices();
  return (
    <section className="space-y-4">
      <h1 className="text-2xl font-semibold">Clients &gt; Cr√©er un nouveau client</h1>
      <NewClientForm choices={choices}/>
    </section>
  );
}
